<!DOCTYPE html>
<html>
  <head>
    <title>Hike Planner</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="style.css" />
    
    <script src="lib/auth0-lock/build/auth0-lock.min.js"></script>
    <script src="lib/angular/angular.min.js"></script>
    <script src="lib/auth0-angular/build/auth0-angular.min.js"></script>
    <script src="lib/a0-angular-storage/dist/angular-storage.min.js"></script>
    <script src="lib/angular-jwt/dist/angular-jwt.min.js"></script>
  
    <script src="lib/underscore/underscore.js"></script>
    
    <script src="lib/jquery/dist/jquery.min.js"></script>
    
    <script src="lib/angular-ui-router/release/angular-ui-router.min.js"></script>
    <script src="lib/angular-animate/angular-animate.min.js"></script>
    <script src="app/auth/auth.js"></script>
    <script src="app/home/home.js"></script>
    <script src="app/new-trip/new-trip-where.js"></script>
    <script src="app/new-trip/new-trip.js"></script>
    <script src="app/existing/existing.js"></script>
    <script src="app/app.js"></script>
  </head>

  <body ng-app="hikeplanner" ng-controller="backgroundController">
    <div ui-view class="back" ng-style="{'background-image':'url(' + img.url + ')'}"></div>
    
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC9zrj84r3C4q6XKvrIdJwxOMHy4w8g3ys&libraries=places" async defer></script>
  </body>
  
  <script>
      $(function(){
        
       var nextImage = function(index,data){
        
             // $(".back").fadeOut("slow",function(){
             //          $(this).css({
             //            "background-image":"url('" + data.images[index].display_sizes[0].uri + "')",
             //              "-webkit-background-size": "cover",
             //              "-moz-background-size": "cover",
             //              "-o-background-size": "cover",
             //              "background-size": "cover"
             //            }).fadeIn("slow");
             //      });
             
             
             
             
             $('.back').animate({
               opacity: 0.60},
               1000, 
               function(){
                  $(this).css({
                    "background-image":"url('" + data.images[index].display_sizes[0].uri + "')",
                    "-webkit-background-size": "cover",
                    "-moz-background-size": "cover",
                    "-o-background-size": "cover",
                    "background-size": "cover"
                  });
                }).animate({opacity:1.0},1000);

       }; 
        
      var apiKey = 'sr6nkrp3uqx993kvuu8zb8n4';
      setInterval(function(){
            $.ajax(
                {
                  type:'GET',
                  url:"https://api.gettyimages.com/v3/search/images/creative?phrase=hiking",
                  beforeSend: function (request){
                            request.setRequestHeader("Api-Key", apiKey);
                        }
                })
                .done(function(data){
                    var rand_index = Math.floor(Math.random()*data.images.length);
                    nextImage(rand_index,data);
                })
                .fail(function(data){
                    console.log(data);
                })
              }, 5000);

 
    });
  </script>
  
</html>